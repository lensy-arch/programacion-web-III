<%- include('../partials/head') %>
<div class="container bg-white p-4 rounded shadow-sm">
  <h2><%= libro.id_libro ? 'Editar Libro' : 'Nuevo Libro' %></h2>
  <form
    action="<%= libro.id_libro
                ? '/libros/' + libro.id_libro + '?_method=PUT'
                : '/libros' %>"
    method="POST"
  >
    <div class="mb-3">
      <label class="form-label">Título</label>
      <input
        type="text"
        name="titulo"
        class="form-control"
        value="<%= libro.titulo || '' %>"
        required
      >
    </div>
    <div class="mb-3">
      <label class="form-label">Año Publicación</label>
      <input
        type="number"
        name="año_publicacion"
        class="form-control"
        value="<%= libro.año_publicacion || '' %>"
      >
    </div>
    <div class="mb-3">
      <label class="form-label">Género</label>
      <input
        type="text"
        name="genero"
        class="form-control"
        value="<%= libro.genero || '' %>"
      >
    </div>
    <div class="mb-3">
      <label class="form-label">Resumen</label>
      <textarea
        name="resumen"
        class="form-control"
      ><%= libro.resumen || '' %></textarea>
    </div>
    <div class="mb-3">
      <label class="form-label">Autor</label>
      <select name="id_autor" class="form-select" required>
        <option value="">-- Seleccionar Autor --</option>
        <% autoresList.forEach(a => { %>
          <option
            value="<%= a.id_autor %>"
            <%= libro.id_autor === a.id_autor ? 'selected' : '' %>
          >
            <%= a.nombre %>
          </option>
        <% }) %>
      </select>
    </div>
    <button type="submit" class="btn btn-primary">
      <%= libro.id_libro ? 'Actualizar' : 'Crear' %>
    </button>
    <a href="/libros" class="btn btn-secondary">Cancelar</a>
  </form>
</div>
